
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>地图加载完成事件</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <style>
        html, body, #container {
            height: 100%;
            width: 100%;
        }

        .amap-icon img,
        .amap-marker-content img {
            width: 25px;
            height: 34px;
        }

        .marker {
            position: absolute;
            top: -20px;
            right: -118px;
            color: #fff;
            padding: 4px 10px;
            box-shadow: 1px 1px 1px rgba(10, 10, 10, .2);
            white-space: nowrap;
            font-size: 12px;
            font-family: "";
            background-color: #25A5F7;
            border-radius: 3px;
        }

        .custom-input-card {
            width: 18rem;
        }

            .custom-input-card .btn:last-child {
                margin-left: 1rem;
            }

        .content-window-card {
            position: relative;
            width: 23rem;
            padding: 0.75rem 0 0 1.25rem;
            box-shadow: none;
            bottom: 0;
            left: 0;
        }

            .content-window-card p {
                height: 2rem;
            }
    </style>

</head>
<body>
    <div id="container"></div>
    <div id="tip" class="info">地图正在加载</div>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.12&key=	7a7783a78617cf97207a84f671999cee"></script>
    <script src="~/Script/jquery-3.1.1.js"></script>
    <script type="text/javascript">
        //初始化地图对象，加载地图
        var marker, map = new AMap.Map("container", {
            resizeEnable: true,
            center: [116.397428, 39.90923],
            zoom: 5
        });
        map.on('complete', function () {
            document.getElementById('tip').innerHTML = "地图图块加载完毕！当前地图中心点为：" + map.getCenter();
        });

        $.ajax({
            url: "http://localhost:8099/MonitorPoints/GetMonitorPoint",
            type: "get",
            data: {
            },
            success: function (data) {
                $(data).each(function (index, data) {
                    //添加点标记
                    marker = new AMap.Marker({
                        icon: "http://localhost:64754/愤怒的小鸟图标.ico",
                        position: [data.Longitude, data.Latitude],
                        offset: new AMap.Pixel(-13, -30)
                    });
                    marker.setMap(map);
                })
            }
        })


        //添加点标记
        //marker = new AMap.Marker({
        //    icon: "http://localhost:64754/愤怒的小鸟图标.ico",
        //    position: [116.406315, 39.908775],
        //    offset: new AMap.Pixel(-13, -30)
        //});
        //marker.setMap(map);
        

            //mar = new AMap.Marker({
            //    icon: "http://localhost:64754/安卓图标.ico",
            //    position: [116.397428, 39.90923],
            //    offset: new AMap.Pixel(-13, -30)
            //});
            //mar.setMap(map);

            //mar.on('click', showInfoM);
            //function showInfoM() {

            //    //构建信息窗体中显示的内容
            //    var info = [];
            //    info.push("<p class='input-item'>电话 : 010-84107000   邮编 : 100102</p>");
            //    info.push("<p class='input-item'>地址 :北京市朝阳区望京阜荣街10号首开广场4层</p></div></div>");

            //    infoWindow = new AMap.InfoWindow({
            //        content: info.join("")  //使用默认信息窗体框样式，显示信息内容
            //    });

            //    infoWindow.open(map, map.getCenter());
            //}

    </script>
</body>
</html>
